{"version":3,"file":"js/smush-global.min.js","mappings":"yBAIAA,SAASC,iBAAiB,oBAAoB,WAQ7C,SAASC,EAAoBC,GAC5BA,EAAMC,iBAEN,IACMC,EADSF,EAAMG,OACCC,QAAQ,6BAG9BC,EAFYH,EAAOI,aAAa,YAEZJ,EACrB,CAEA,SAASG,EAAeE,EAAKL,GAC5B,IAAMM,EAAM,IAAIC,eAChBD,EAAIE,KACH,OACAC,QAAU,oCAAsCJ,EAAM,gBAAkBK,aAAaC,OACrF,GAEDL,EAAIM,OAAS,WACRZ,GACHA,EAAOa,cAAc,yBAAyBC,cAAc,IAAIC,WAAW,QAAS,CACnFC,KAAMC,OACNC,SAAS,EACTC,YAAY,IAGf,EACAb,EAAIc,MACL,CAlC4BzB,SAAS0B,iBACpC,0DAEmBC,SAAQ,SAACC,GAC5BA,EAAO3B,iBAAiB,QAASC,EAClC,IA+BA,IAAM2B,EAA2B7B,SAASkB,cAAe,uDACpDW,GACJA,EAAyB5B,iBAAkB,SAAS,WACnD,IAAMU,EAAM,IAAIC,eAChBD,EAAIE,KACH,OACAC,QAAU,kDAAoDC,aAAaC,OAC3E,GAEDL,EAAIM,OAAS,WACZK,OAAOQ,IAAIC,YAAa,wBACzB,EACApB,EAAIc,MACL,KAK0B,WAC1B,IAAMO,EAAehC,SAASkB,cAAc,uCAC5C,GAAOc,GAAkBA,EAAaC,GAAtC,CAIA,IAAAC,EAAgCF,EAAaG,QAArCC,EAAUF,EAAVE,WAAYC,EAAOH,EAAPG,QACpB,GAAOA,EAAP,CAIAL,EAAaM,QAAU,SAACC,GACvB,IAAMC,EAAYD,EAAEjC,OAAOkC,UACrBC,EAAwBD,GAAaA,EAAUE,SAAU,kCACnCF,IAAeC,GAAyBD,EAAUE,SAAS,mBAAqBF,EAAUE,SAAS,sBAK1HN,GACJ5B,EAAe4B,GAGXK,GACJnB,OAAOQ,IAAIC,YAAaC,EAAaC,IAEvC,EAEA,IAAMU,EAAgB,CACrBC,KAAM,UACNC,KAAM,OACNC,QAAS,CACRC,MAAM,EACNC,MAAOC,cAAcC,cACrBC,QAASF,cAAcG,uBAIzB9B,OAAOQ,IAAIuB,WACVrB,EAAaC,GACbI,EACAM,EAhCD,CALA,CAuCD,CAEAW,EACD,G","sources":["webpack://wp-smushit/./_src/js/global.js"],"sourcesContent":["import '../scss/common.scss';\n\n/* global ajaxurl */\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tconst dismissNoticeButton = document.querySelectorAll(\n\t\t'.smush-dismissible-notice .smush-dismiss-notice-button'\n\t);\n\tdismissNoticeButton.forEach((button) => {\n\t\tbutton.addEventListener('click', handleDismissNotice);\n\t});\n\n\tfunction handleDismissNotice(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = event.target;\n\t\tconst notice = button.closest('.smush-dismissible-notice');\n\t\tconst key = notice.getAttribute('data-key');\n\n\t\tdismissNotice( key, notice );\n\t}\n\n\tfunction dismissNotice( key, notice ) {\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open(\n\t\t\t'POST',\n\t\t\tajaxurl + '?action=smush_dismiss_notice&key=' + key + '&_ajax_nonce=' + smush_global.nonce,\n\t\t\ttrue\n\t\t);\n\t\txhr.onload = () => {\n\t\t\tif (notice) {\n\t\t\t\tnotice.querySelector('button.notice-dismiss').dispatchEvent(new MouseEvent('click', {\n\t\t\t\t\tview: window,\n\t\t\t\t\tbubbles: true,\n\t\t\t\t\tcancelable: true\n\t\t\t\t}));\n\t\t\t}\n\t\t};\n\t\txhr.send();\n\t}\n\n\tconst dismissCacheNoticeButton = document.querySelector( '#wp-smush-cache-notice .smush-dismiss-notice-button' );\n\tif ( dismissCacheNoticeButton ) {\n\t\tdismissCacheNoticeButton.addEventListener( 'click', function() {\n\t\t\tconst xhr = new XMLHttpRequest();\n\t\t\txhr.open(\n\t\t\t\t'POST',\n\t\t\t\tajaxurl + '?action=smush_dismiss_cache_notice&_ajax_nonce=' + smush_global.nonce,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\txhr.onload = () => {\n\t\t\t\twindow.SUI.closeNotice( 'wp-smush-cache-notice' );\n\t\t\t};\n\t\t\txhr.send();\n\t\t} );\n\t}\n\n\n\t// Show header notices.\n\tconst handleHeaderNotice = () => {\n\t\tconst headerNotice = document.querySelector('.wp-smush-dismissible-header-notice');\n\t\tif ( ! headerNotice || ! headerNotice.id ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { dismissKey, message } = headerNotice.dataset;\n\t\tif ( ! message ) {\n\t\t\treturn;\n\t\t}\n\n\t\theaderNotice.onclick = (e) => {\n\t\t\tconst classList = e.target.classList;\n\t\t\tconst isCloseAndDismissLink = classList && classList.contains( 'smush-close-and-dismiss-notice' );\n\t\t\tconst shouldDismissNotice = classList && ( isCloseAndDismissLink || classList.contains('sui-icon-check') || classList.contains('sui-button-icon') );\n\t\t\tif ( ! shouldDismissNotice ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( dismissKey ) {\n\t\t\t\tdismissNotice( dismissKey );\n\t\t\t}\n\n\t\t\tif ( isCloseAndDismissLink ) {\n\t\t\t\twindow.SUI.closeNotice( headerNotice.id );\n\t\t\t}\n\t\t}\n\n\t\tconst noticeOptions = {\n\t\t\ttype: 'warning',\n\t\t\ticon: 'info',\n\t\t\tdismiss: {\n\t\t\t\tshow: true,\n\t\t\t\tlabel: wp_smush_msgs.noticeDismiss,\n\t\t\t\ttooltip: wp_smush_msgs.noticeDismissTooltip,\n\t\t\t},\n\t\t};\n\n\t\twindow.SUI.openNotice(\n\t\t\theaderNotice.id,\n\t\t\tmessage,\n\t\t\tnoticeOptions\n\t\t);\n\t}\n\n\thandleHeaderNotice();\n});\n"],"names":["document","addEventListener","handleDismissNotice","event","preventDefault","notice","target","closest","dismissNotice","getAttribute","key","xhr","XMLHttpRequest","open","ajaxurl","smush_global","nonce","onload","querySelector","dispatchEvent","MouseEvent","view","window","bubbles","cancelable","send","querySelectorAll","forEach","button","dismissCacheNoticeButton","SUI","closeNotice","headerNotice","id","_headerNotice$dataset","dataset","dismissKey","message","onclick","e","classList","isCloseAndDismissLink","contains","noticeOptions","type","icon","dismiss","show","label","wp_smush_msgs","noticeDismiss","tooltip","noticeDismissTooltip","openNotice","handleHeaderNotice"],"sourceRoot":""}